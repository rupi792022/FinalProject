<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css"></script>-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
            crossorigin="anonymous">
    </script>
    <script src="../Scripts/ajaxCalls.js"></script>
    <script src="../Scripts/ajaxCallsWithKey.js"></script>
    <link href="../css/VolunteerPersonalDetails.css" rel="stylesheet" />
    <script>
        $(document).ready(function () {
            $("#Save").click(Save);
        });

        function Save() {
            getDatails = JSON.parse(localStorage.getItem('userDetails'));

            let newpassword = $("#NewPassword").val();
            let verifynewpassword = $("#VerifyNewPassword").val();

            if (newpassword != verifynewpassword) {
                alert("Verification is not correct.")
            }
            else {

                if (newpassword != "")
                    password = $("#NewPassword").val();
                else
                    password = getDatails.Volunteer_password;
            }

            let firstname = $("#firstname").val();
            let lastname = $("#lastname").val();
            let birthdate = $("#birthdate").val();
            let mobilephone = $("#mobilephone").val();
            let email = getDatails.Volunteer_email;

            let gender = $("input[type=radio][name=gender]:checked").val();
            if (gender) {
                console.log(gender);
            }
            else alert('No gender selected');

            let startdate = $("#startdate").val();
            let volunteertype = $("input[type=radio][name=volunteertype]:checked").val();
            if (volunteertype) {
                console.log(volunteertype);
            }
            else alert('No volunteer type selected');


            var arrLanguage = [];
            $.each($("input[name='language']:checked"), function () {
                arrLanguage.push($(this).val());
            });
            let strLanguage = arrLanguage.toString();
        

            let MyVolunteerDetails = {
                First_name: firstname,
                Last_name: lastname,
                Date_of_birth: birthdate,
                Phone_number: mobilephone,
                Gender: gender,
                Volunteer_email: email,
                Start_date: startdate,
                Volunteer_type: volunteertype,
                Volunteer_password: password,
                Language: strLanguage
            }
            ajaxCall("PUT", "../api/Volunteers", JSON.stringify(MyVolunteerDetails), SaveSuccess, SaveError)
            return false;
        }
     
            function SaveSuccess() {
                localStorage.setItem("userDetails", JSON.stringify(MyVolunteerDetails));
                window.location.href = "VolunteerHome.html";
            }
            function SaveError(error) {
                console.log(error);
            }

    </script>
</head>
<body>
    <div class="loginBox">
        <img src="../Images/FOA.png" /><br />
        <form>
            <div class="inputBox">
                <table>
                    <tr>
                        <td><p>First name:</p></td>
                        <td><input type="text" id="firstname" name="firstname" placeholder="First name" required></td>
                        <td><p>Last name:</p></td>
                        <td><input type="text" id="lastname" name="lastname" placeholder="Last name" required></td>
                    </tr>
                    <tr>
                        <td><p>Date of birth:</p></td>
                        <td><input type="date" id="birthdate" name="birthdate" required></td>
                        <td><p>Phone:</p></td>
                        <td><input type="tel" id="mobilephone" name="mobilephone" placeholder="Phone number" required pattern="[0][5][0-9]{1}[-]{0,1}[0-9]{3}[-]{0,1}[0-9]{4}"></td>
                    </tr>
                    <tr>
                        <td>
                            <p>Gender:</p>
                            <input type="radio" id="woman" name="gender" value="Woman" required>
                            <label for="woman"> Woman</label><br>
                            <input type="radio" id="man" name="gender" value="Man" required>
                            <label for="man"> Man</label><br>
                            <input type="radio" id="other" name="gender" value="Other" required>
                            <label for="other"> Other</label>
                        </td>
                        <td>
                            <p>Volunteer Type:</p>
                            <input type="radio" id="freetime" name="volunteertype" value="FreeTime" required>
                            <label for="freetime"> Free time</label><br>
                            <input type="radio" id="againsthours" name="volunteertype" value="AgainstHours" required>
                            <label for="againsthours"> Against hours</label>
                        </td>
                        <td>
                            <p>Choose your language/s:</p>
                        </td>
                        <td>
                            <input type="checkbox" id="Hebrew" name="language" value="Hebrew" required>
                            <label for="Hebrew">Hebrew</label><br>
                            <input type="checkbox" id="English" name="language" value="English" required>
                            <label for="English">English</label><br>
                            <input type="checkbox" id="Russian" name="language" value="Russian" required>
                            <label for="Russian">Russian</label><br>
                            <input type="checkbox" id="French" name="language" value="French" required>
                            <label for="French">French</label><br>
                            <input type="checkbox" id="Arabic" name="language" value="Arabic" required>
                            <label for="Arabic">Arabic</label>
                        </td>
                    </tr>
                    <tr>
                        <td><p>Start date:</p>
                        <td>
                            <input type="date" id="startdate" name="startdate" required>
                        </td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><p><b>Change password:</b></p></td>
                        <td colspan="2"><p>Passwords must be at least 8 characters long</p></td>
                    </tr>
                    <tr>
                        <td><p>New password:</p></td>
                        <td><input type="password" id="NewPassword" name="NewPassword" placeholder="Enter new password" pattern=".{8,}"></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><p>Verify new password:</p></td>
                        <td><input type="password" id="VerifyNewPassword" name="VerifyNewPassword" placeholder="Enter verify new password" pattern=".{8,}"></td>
                        <td></td>
                        <td><button type="button" id="Save">Save</button></td>
                    </tr>
                </table>
            </div>
        </form>
    </div>
</body>
    </html>
