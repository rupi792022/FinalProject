<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="../Scripts/ajaxCalls.js"></script>
    <link href="../css/KeyWord-manager.css" rel="stylesheet" />
    <script>
        $(document).ready(function () {
            getDatails = JSON.parse(localStorage.getItem('VolunteerDetails'));
            var user = $('<a class= "dropdown-toggle" data-toggle="dropdown" href="#">' + getDatails.First_name + ' ' + getDatails.Last_name + '<span class= "caret"></span></a><ul class="dropdown-menu"><li><a href="SingIn.html">Add volunteer</a></li><li><a href="#">Personal details</a></li><li><a onclick="logOut()">Log out</a></li></ul>');
            $(user).clone().appendTo(".dropdown");

            let apiCall = "../api/Twitters/getCommonUsers";
            ajaxCall("GET", apiCall, "", getSuccessgetCommonUsers, getErrorgetCommonUsers);

        });

        function getSuccessgetCommonUsers(dicWords) {
            console.log("success");
            sortHastag(dicWords);
        }

        function sortHastag(dict) {
            strRed = "";
            strGreen = "";
            strYellow = "";
            str = 'No common users found';
            for (let k in dict) {

                if (dict[k] >= 5) {
                    strRed = '<p>';
                    strRed += k;
                    strRed += " ";
                    strRed += '</p>';
                    document.getElementById("red").innerHTML += strRed;
                }
                else if (dict[k] >= 3) {
                    strYellow = '<p>';
                    strYellow += k;
                    strYellow += " ";
                    strYellow += '</p>';
                    document.getElementById("yellow").innerHTML += strYellow;
                }
                else if (dict[k] == 2) {
                    strGreen = '<p>';
                    strGreen += k;
                    strGreen += " ";
                    strGreen += '</p>';
                    document.getElementById("green").innerHTML += strGreen;
                }
                else
                    document.getElementById("noUsers").innerHTML = str; //לסדר את הערה שתראה נורמאלי ובולטת להעין
            }
        }

        function getErrorgetCommonUsers() {
            console.log("error");
        }

    </script>

</head>
<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <img src="../Images/FOA.png" />
            </div>
            <ul class="nav navbar-nav">
                <li><a class="space" href="ManagerHome.html">Home</a></li>
                <li><a class="space" href="GuidingProgram.html">Guiding Program</a></li>
                <li><a class="space" href="MonitoringReport.html">Reports</a></li>
                <li><a class="space" href="#">Dashbord</a></li>
                <li><a class="space" href="KeyWord-volunteer.html">Keywords</a></li>
                <li><a class="space" href="CommonUsers-volunteer.html">Common Users</a></li>
                <li class="dropdown"></li>
            </ul>
        </div>
    </nav>
    <div class="loginBox">
        <div class="inputBox">
            <p id="headerAuthor">Common Users</p>
            <p id="noUsers"></p>
            <div class="words">
                <div id="red"></div>
                <div id="yellow"></div>
                <div id="green"></div>
            </div>
        </div>
    </div>
</body>
</html>
