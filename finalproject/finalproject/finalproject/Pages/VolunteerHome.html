<!DOCTYPE html>
<html lang="en">
<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="../Scripts/ajaxCalls.js"></script>
    <link href="../css/VolunteerHome.css" rel="stylesheet" />

    <script>
        $(document).ready(function () {
            getDatails = JSON.parse(localStorage.getItem('userDetails'));
            ajaxCall("GET", "../api/Volunteers/ReadVolunteer_V?email=" + getDatails, "", getSuccessDetails_v, getErrorDetails_v);
        });

        function getSuccessDetails_v(volunteerDetails) {
            console.log(volunteerDetails);
            if (typeof (Storage) !== "undefined") {
                localStorage.setItem('VolunteerDetails', JSON.stringify(volunteerDetails));
            }
            else {
                alert("web storage not supported!");
            }
            var user = $('<a class= "dropdown-toggle" data-toggle="dropdown" href="#">' + volunteerDetails.First_name + ' ' + volunteerDetails.Last_name + '<span class= "caret"></span></a><ul class="dropdown-menu"><li><a href="#">Personal details</a></li><li><a onclick="logOut()">Log out</a></li></ul>');
            $(user).clone().appendTo(".dropdown");
        }

        function getErrorDetails_v(error) {
            console.log(error)
        }

        function logOut() {
            localStorage.clear();
            window.location.href = "LogIn.html";
        }


    </script>
</head>
<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <img id="imgNavbar" src="../Images/FOA.png" />
            </div>
            <ul class="nav navbar-nav">
                <li><a class="space" href="VolunteerHome.html">Home</a></li>
                <li><a class="space" href="Guiding.html">Tutorial</a></li>
                <li><a class="space" href="#">Activity time</a></li>
                <li><a class="space" href="Reports.html">Reports</a></li>
                <li><a class="space" href="KeyWord-volunteer.html">Keywords</a></li>
                <li class="dropdown"></li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <table>
            <tr>
                <td>
                    <a class="btnCard" href="Guiding.html">
                        <div class="card">
                            <img class="imgCard" src="../Images/guiding.png" />
                            <div class="textCard">
                                <p>Tutorial</p>
                            </div>
                        </div>
                    </a>
                </td>
                <td>
                    <a class="btnCard" href="Reports.html">
                        <div class="card">
                            <img class="imgCard" src="../Images/reports.png" />
                            <div class="textCard">
                                <p>Reports</p>
                            </div>
                        </div>
                    </a>
                </td>
            </tr>
            <tr>
                <td>
                    <a class="btnCard" href="KeyWord-volunteer.html">
                        <div class="card">
                            <img class="imgCard" src="../Images/keywoeds.png" />
                            <div class="textCard">
                                <p>Keywords</p>
                            </div>
                        </div>
                    </a>
                </td>
                <td>
                    <a class="btnCard" href="#">
                        <div class="card">
                            <img class="imgCard" src="../Images/Activity time.png" />
                            <div class="textCard">
                                <p>Activity time</p>
                            </div>
                        </div>
                    </a>
                </td>
            </tr>
        </table>
    </div>     
</body>
</html>