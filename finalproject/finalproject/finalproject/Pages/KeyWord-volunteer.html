<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="../Scripts/ajaxCalls.js"></script>
    <link href="../css/KeyWord-manager.css" rel="stylesheet" />
    <script>
        $(document).ready(function () {
            getDatails = JSON.parse(localStorage.getItem('VolunteerDetails'));
            var user = $('<a class= "dropdown-toggle" data-toggle="dropdown" href="#">' + getDatails.First_name + ' ' + getDatails.Last_name + '<span class= "caret"></span></a><ul class="dropdown-menu"><li><a href="SingIn.html">Add volunteer</a></li><li><a onclick="logOut()">Log out</a></li></ul>');
            $(user).clone().appendTo(".dropdown");

            let apiCall = "../api/Twitters/getHashtag";
            ajaxCall("GET", apiCall, "", getSuccessHashtag, getErrorHashtag);

        });

        function getSuccessHashtag(dicWords) {
            console.log("success");
            sortHastag(dicWords);
        }
        function getErrorHashtag() {
            console.log("error");
        }

        function sortHastag(dict) {
            strRed = "";
            strGreen = "";
            strYellow = "";
            for (let k in dict)
            {
                
                if (dict[k] >=5) {
                    strRed = '<p>';
                    strRed += k;
                    strRed += " ";
                    strRed += '</p>';
                    document.getElementById("red").innerHTML += strRed;
                }
               else if (dict[k] >=3) {
                    strYellow = '<p>';
                    strYellow += k;
                    strYellow += " ";
                    strYellow += '</p>';
                    document.getElementById("yellow").innerHTML += strYellow;
                }
                else if (dict[k] == 2) {
                    strGreen = '<p>';
                    strGreen += k;
                    strGreen += " ";
                    strGreen += '</p>';
                    document.getElementById("green").innerHTML += strGreen;
                }

            }
        }
        // בדף זה יופיעו רק המילים. המילים ממויינות לפי מספר הפעמים שהן במערכת
        // המילים הינן אשטגים בלבד!
        // אם מילה מופיעה פעמיים לפחות היא תהיה בצבע ירוק אם היא מופיעה יותר ועד 5 היא תהיה בצבע כתום ואם 5 ומעלה אדום
    </script>
            
</head >
<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <img src="../Images/FOA.png" />
            </div>
            <ul class="nav navbar-nav">
                <li><a class="space" href="VolunteerHome.html">Home</a></li>
                <li><a class="space" href="Guiding.html">Tutorial</a></li>
                <li><a class="space" href="Reports.html">Reports</a></li>
                <li><a class="space" href="KeyWord-volunteer.html">Keywords</a></li>
                <li class="dropdown"></li>
            </ul>
        </div>
    </nav>
    <div class="loginBox">
        <div class="inputBox">
            <p id="headerKeywords">Keywords</p>
            <div class="words">
                <div id="red"></div>
                <div id="yellow"></div>
                <div id="green"></div>
            </div>
        </div>
    </div>
</body>
</html >
